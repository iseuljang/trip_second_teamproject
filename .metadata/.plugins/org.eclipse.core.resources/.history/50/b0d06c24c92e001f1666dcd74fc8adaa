<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page import="trip.util.*" %>
<%@ include file="../include/head.jsp" %>
<link rel="stylesheet" type="text/css" href="../css/view.css">    
<%
request.setCharacterEncoding("UTF-8");

String uno = request.getParameter("uno");
String bkind       = request.getParameter("kind");
String pageno     = request.getParameter("page");
String type       = request.getParameter("type");
String bno        = request.getParameter("no");
String[] season   = request.getParameterValues("season"  );
String[] local    = request.getParameterValues("local"   );
String[] human    = request.getParameterValues("human"   );
String[] move     = request.getParameterValues("move"    );
String[] schedule = request.getParameterValues("schedule");
String[] uinout   = request.getParameterValues("uinout"  );
String keyword   = request.getParameter("keyword"  );
 
if(bkind  == null) bkind  = "I";
if(pageno  == null) pageno  = "1";
if(type    == null) type    = "T";
if(keyword == null) keyword = "";
keyword = keyword.replace("\"","&quot;");
//í‚¤ì›Œë“œë¥¼ ê³µë°±ì„ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ëˆ ì„œ ë°°ì—´ì— ì €ì¥
String[] keylist = keyword.split(" ");
if(bno == null || bno.equals(""))
{
	response.sendRedirect("../firstmain/lobby.jsp");
	return;	
}

//íŒŒë¼ë©”í„°ë¥¼ ìƒì„±í•œë‹¤.
/* String search_param = "";
search_param += "&season=" + season;
search_param += "&local=" + local;
search_param += "&human=" + human;
search_param += "&move=" + move;
search_param += "&schedule=" + schedule;
search_param += "&uinout=" + uinout; */
String search_param = "";
search_param += Param.getParam(season,"season");
search_param += "&";
search_param += Param.getParam(local,"local");
search_param += "&";
search_param += Param.getParam(human,"human");
search_param += "&";
search_param += Param.getParam(move,"move");
search_param += "&";
search_param += Param.getParam(schedule,"schedule");
search_param += "&";
search_param += Param.getParam(uinout,"uinout");

String param = "";
param += "type=" + type;
param += "&";
param += "page=" + pageno;
param += "&";
param += "no=" + bno;
param += "&";
param += "keyword=" + keyword;
param += "&";
param += "kind=" + bkind;
param += "&";
param += search_param;

// ë³¸ë¬¸ ì—ì„œ ê¸ì •í™•ë¥  70% ì´ìƒ ë¬¸ë‹¨ ì¡°íšŒ 
advertDTO advdto = new advertDTO();
int limit = 5; // 5ê°œê¹Œì§€ ì¶œë ¥
int s_count = 0;
s_count = advdto.SimilarTotal(bno);
//==== vipê´‘ê³  ì¶œë ¥í• ë•Œ ì‚¬ìš© =====
int num = 1;
int Pri = 1;
//===========================
ArrayList<positiveVO> mlist = advdto.positive_order(bno, limit);

// ë¶„ì„ëœ í‚¤ì›Œë“œ ìˆœìœ„ 
int limit2 = 5; // 5ê°œê¹Œì§€ ì¶œë ¥
ArrayList<positiveVO> bkeyword = advdto.bkeyword(bno, limit2);

//ë¶„ì„ëœ ê´‘ê³ í‚¤ì›Œë“œ
int limit4 = 5;
ArrayList<positiveVO> similarad = advdto.similarad(bno,limit4);

//ê²Œì‹œë¬¼ ì •ë³´ë¥¼ ì¡°íšŒí•œë‹¤.
boardDTO bdto  = new boardDTO();
boardVO  bvo   = bdto.Read(bno, true);

//ê²Œì‹œë¬¼ ì²¨ë¶€íŒŒì¼ ì¡°íšŒí•œë‹¤.
attachDTO adto = new attachDTO();
ArrayList<attachVO>  avos  = adto.Read(bno);

//ì²¨ë¶€íŒŒì¼ì´ ì—†ëŠ” ê²Œì‹œë¬¼ ë³¼ë•Œ ì˜¤ë¥˜ë°©ì§€í•˜ê¸° ìœ„í•´ ì²«ë²ˆì§¸ ë°°ì—´ì— ë¹ˆê°’ë„£ìŒ
if(avos.size() == 0)
{
	attachVO avo  = new attachVO();
	avo.setAno("");
	avo.setFname("");
	avo.setPname("");
	avo.setBno("");
	avos.add(avo);
}

//ë§›ì§‘ì •ë³´ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ
bestlocalfoodDTO BFdto = new bestlocalfoodDTO();
ArrayList<bestlocalfoodVO> BFlist  = BFdto.Get_BFlist(bno);
//ë§›ì§‘ì§€ì—­ ì¡°íšŒ
bestlocalfoodVO BFlocal = BFdto.Get_BFlocal(bno);

// ========================= ê´‘ê³ ë…¸ì¶œ ê´€ë ¨ ì½”ë“œ(ìœ ì´ê°•) ===============================
// --------------- ì¿ í‚¤ê°€ ìˆì„ ì‹œ ë°›ì•„ì˜´ ---------------
Cookie[] cookie_list = request.getCookies();
//ì¿ í‚¤ ìœ ë®¤ íŒë‹¨ìš© flag ìƒì„±
boolean remember_ad1 = false;
boolean remember_ad2 = false;
boolean remember_ad3 = false;

// ë…¸ì¶œì •ë³´ë¥¼ ë‹´ê¸°ìœ„í•œ DTO, VO ì„ ì–¸
ad_exposureDTO ex_dto  = new ad_exposureDTO();

%>
<script src="//code.jquery.com/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script> <!-- ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€ -->
<script>

$("#serch1-1").click(function(){
	document.location = "../firstmain/main.jsp?season=ë´„";
});	



	$(document).ready(function()
	{
		
		
		
		//ë§¨ìœ„ë¡œ ê°€ëŠ” ë²„íŠ¼
		$(window).scroll(function() { 
			if ($(this).scrollTop() > 450) { //250 ë„˜ìœ¼ë©´ ë²„íŠ¼ì´ ë³´ì—¬ì§ë‹ˆë‹¤. 
				$('#toTop').fadeIn(); 
				$('#toTop').css('left', $('#sidebar').offset()); // #sidebar left:0 ì£„í‘œ 
			} else { 
				$('#toTop').fadeOut(); 
			} 
		}); 
		// ë²„íŠ¼ í´ë¦­ì‹œ 
		$("#toTop").click(function() { 
			$('html, body').animate({ scrollTop : 0 // 0 ê¹Œì§€ animation ì´ë™í•©ë‹ˆë‹¤. 
			}, 400); // ì†ë„ 400 return false; 
		}); 
		
		// ì¤‘ê°„ì— ìˆëŠ” ë²„íŠ¼(ê´‘ê³ ë„£ì„ê³³)
		$(window).scroll(function() { 
			if ($(this).scrollTop() < 300) { // ì»¤ì§€ë©´ë™ì•ˆ ë²„íŠ¼ì´ ë³´ì—¬ì§ë‹ˆë‹¤. 
				$('#toMiddle').fadeIn(); 
				$('#toMiddle').css('left', $('#sidebar').offset()); // #sidebar left:0 ì£„í‘œ 
			} 
			/*
			else if (($(document).height()-$(window).height()) > 2000) { 
				$('#toMiddle').fadeOut(); 
			} */
		}); 
		
		//ë§¨ì•„ë˜ë¡œ ê°€ëŠ” ë²„íŠ¼
		$(window).scroll(function() { 
			if ($(this).scrollTop() > 300) { // ì‘ì€ë™ì•ˆ ë²„íŠ¼ì´ ë³´ì—¬ì§ë‹ˆë‹¤. 
				$('#toDown').fadeIn(); 
				$('#toDown').css('left', $('#sidebar').offset()); // #sidebar left:0 ì£„í‘œ 
			} else if (($(document).height()-$(window).height()) > 200) { 
				$('#toDown').fadeOut(); 
			} 
		}); 
		// ë²„íŠ¼ í´ë¦­ì‹œ 
		$("#toDown").click(function() { 
			$('html, body').animate({ scrollTop : $('body').height() // 0 ê¹Œì§€ animation ì´ë™í•©ë‹ˆë‹¤. 
			}, 400); // ì†ë„ 400 return false; 
		}); 
		
		
		/* ê¸€ëª©ë¡ë²„íŠ¼ */
		$("#index_btn").click(function(){
			if("<%= bkind %>" == "I")
			{
				document.location = "../board/index.jsp?<%= param %>";
			}else if("<%= bkind %>" == "S")
			{
				document.location = "../board/search.jsp?<%= param %>";
			}else if("<%= bkind %>" == "B")
			{
				document.location = "../user/bookmark.jsp?page=<%= pageno %>&uno=<%= uno %>&kind=<%= bkind%>";
			}else if("<%= bkind %>" == "R")
			{
				document.location = "../user/bookreply.jsp?page=<%= pageno %>&uno=<%= uno %>&kind=<%= bkind%>";
			}else if("<%= bkind %>" == "W")
			{
				document.location = "../user/bookwrite.jsp?page=<%= pageno %>&uno=<%= uno %>&kind=<%= bkind%>";
			}
		});
		/* ìˆ˜ì •ë²„íŠ¼ */
		$("#modify_btn").click(function(){
			document.location = "../board/modify.jsp?<%= param %>";
		});
		/* ì‚­ì œë²„íŠ¼ */
		$("#delete_btn").click(function(){
			if(confirm("ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ") == false)
			{
				return;			
			}
			document.location = "../board/delete.jsp?<%= param %>";
		});
		
		$(".btn-like").click(function() 
		{
			$(this).toggleClass("done");
		});
		
		
		loadReply_list();
		loadreco_table();
		
		
	 	document.addEventListener('click', () => 
	 	{
		    const modal = document.querySelector('.modal');
		    const btnCloseModal = document.querySelector('.btn-close-modal');
		    
		    // ëª¨ë‹¬ ì—´ê¸° í•¨ìˆ˜
		    function openModal(adURL) 
		    {
		    	$("#adURL").attr("href",adURL);
		    	$("#spanURL").html(adURL);
		        modal.style.display = 'flex';
		    }
		    
		    // ê° ê´‘ê³  í•­ëª©ì— í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
		    const adItems = [
		        {button: document.querySelector('#b_item1 .ad1-2'), adUrlElement: document.querySelector('#b_item1 #adurl')},
		        {button: document.querySelector('#b_item2 .ad1-2'), adUrlElement: document.querySelector('#b_item2 #adurl')},
		        {button: document.querySelector('#b_item3 .ad1-2'), adUrlElement: document.querySelector('#b_item3 #adurl')}
		    ];
		    
		    adItems.forEach(item => {
		        item.button.addEventListener('click', () => {
		            const adURL = item.adUrlElement.value;
		            openModal(adURL);
		        });
		    });
		
		    // ëª¨ë‹¬ ë‹«ê¸°
		    btnCloseModal.addEventListener('click', () => {
		        modal.style.display = 'none';
		    });
		
		    // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
		    window.addEventListener('click', (e) => {
		        if (e.target === modal) {
		            modal.style.display = 'none';
		        }
		    });
		});
	 	
	 	
	 	
		
		/* ê²Œì‹œë¬¼ ì²«ë²ˆì§¸ ì²¨ë¶€íŒŒì¼ ì´ë¯¸ì§€ ìƒë‹¨ë°°ë„ˆì— ì‚½ì… */
		$("#intro_table").css("background-size", "cover")
						 .css("background-image","url(../upload/<%= avos.get(0).getFname() %>)");
		
		
		var scrolltop = $(document).scrollTop();
        console.log(scrolltop);
        var height = $(document).height();
        console.log(height);
        var height_win = $(window).height();
        console.log(height_win);
		
	});
	
	//vip ìƒí’ˆ ì¶œë ¥
	function loadvip_item(Pri,num) 
	{
        $.ajax({
            url: "loadvip_item.jsp",
            type: "get",
            data: { 
            		Pri : Pri,
            		bno : <%= bno %>
            	},
            success: function(data) 
            {
                $("#vip_item" + num).html(data);
            }
        });
    }
	
	//ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸
	function loadReply_list() 
	{
        $.ajax({
            url: "loadReply_list.jsp",
            type: "get",
            data: { no: "<%= bno %>" },
            success: function(data) 
            {
                $("#replyList").html(data);
            }
        });
    }
	
	/* ëŒ“ê¸€ì‘ì„±ë²„íŠ¼ */
	function Addreply()
	{
		if(confirm("ëŒ“ê¸€ì„ ì‘ì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ?") == false)
		{
			return;
		}
		
		if($("#rnote").val() == "")
		{
			alert("ëŒ“ê¸€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.");
			$("#rnote").focus();
			return;
		}	
		
		$.ajax({
			type : "post",
			url  : "r_writeok.jsp",
			data : 
			{
				no      : "<%= bno %>",
				rnote   : $("#rnote").val(),
				btitle  : "<%= bvo.getBtitle() %>"
			},
			datatype : "html",
			success : function(result)
			{
				loadReply_list();
			}
		});
	}
	
	/* ëŒ“ê¸€ì‚­ì œë²„íŠ¼ */
	function reply_delete(rno)
	{
		if(confirm("ëŒ“ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?") == false )
		{
			return;
		}
		$.ajax({
			type : "post",
			url  : "r_deleteok.jsp",
			data : 
			{
				rno     : rno
			},
			datatype : "html",
			success : function(result)
			{
				alert("ëŒ“ê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
				loadReply_list();
			}
		});
	};
	
	var originalHTML = "";
	var originalbtn  = "";
	
	function reply_update(rno, bno)
	{
		if(confirm("ëŒ“ê¸€ì„ ìˆ˜ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?") == false )
		{
			return;
		}
		
		var rnote = $("#"+rno).text().trim();
		originalHTML = $('#'+rno).html(); // ì´ì „ HTMLì„ ì €ì¥í•´ë‘ 
		originalbtn = $('#reply_div'+rno).html().trim(); // ì´ì „ ë²„íŠ¼ì„ ì €ì¥í•´ë‘ 
		console.log(originalHTML);
		console.log(originalbtn);
		
		$('#'+rno).html(
			"<textarea id='edit_urnote"+rno+"' style='width:740px; height:80px; resize:none;'>"+rnote+"</textarea>"
		);
		
		$('#reply_div'+rno).html(
			`<span class='reply_btn' onclick='reply_updateSave("\${rno}",\${bno})' id='btnEdit'>ì™„ë£Œ</span> 
			<input type="reset" id="reply_reset" value="ì·¨ì†Œ" onclick='replyCancel(\${rno})'>`
		);
	}
	
	function replyCancel(rno) 
	{
	    $('#'+rno).html(originalHTML); 
	    $('#reply_div'+rno).html(originalbtn); 
	}
	
	function reply_updateSave(rno, bno)
	{
		var rnote = $("#edit_urnote"+rno).val();
		
		if(rnote == "")
		{
			alert("ëŒ“ê¸€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
			$("#edit_urnote"+rno).focus();
			return;
		}
		
		$.ajax({
			type : "post",
			url  : "r_modifyok.jsp",
			data : 
			{
				no      : bno,
				rnote   : rnote,
				rno     : rno
			},
			datatype : "html",
			success : function(result)
			{
				alert("ëŒ“ê¸€ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
				$('#'+rno).html('<span>'+ rnote +'</span>'); 
				$('#reply_div'+rno).html(originalbtn); 
			}
		});
	}
	
	
	
	
	function DoBook(bno)
	{
		if(confirm("ë¶ë§ˆí¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?") == false )
		{
			return;
		}
		
		$.ajax({
			type : "post",
			url  : "bookok.jsp",
			data : 
			{
				no : bno
			},
			datatype : "html",
			success : function(result)
			{
				result = result.trim();
				switch(result)
				{
				case "ERROR" :
					alert("ì´ë¯¸ ë¶ë§ˆí¬ëœ ê²Œì‹œë¬¼ì…ë‹ˆë‹¤");
					break;
				case "OK" :
					alert("ë¶ë§ˆí¬ë˜ì—ˆìŠµë‹ˆë‹¤");
					window.location.reload();
					break;
				}
			}
		});
	}
	
	//ì¶”ì²œ í…Œì´ë¸”
	function loadreco_table() 
	{
        $.ajax({
            url: "loadreco_table.jsp",
            type: "get",
            data: { no: "<%= bno %>" },
            success: function(data) 
            {
                $("#reco_table").html(data);
            }
        });
    }
	
	
	//ì¶”ì²œ
	function DoReco_up(bno,rcstate)
	{
		if(confirm("ì¶”ì²œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?") == false )
		{
			return;
		}
		
		recoup_count = $("#recoup_count").text();
		console.log(rcstate);
		
		$.ajax({
			type : "post",
			url  : "reco_upok.jsp",
			data : 
			{
				no : bno
			},
			datatype : "html",
			success : function(result)
			{
				result = result.trim();
				switch(result)
				{
				case "ERROR" :
					alert("ì´ë¯¸ ì¶”ì²œëœ ê²Œì‹œë¬¼ì…ë‹ˆë‹¤");
					break;
				case "OK" :
					alert("ì¶”ì²œë˜ì—ˆìŠµë‹ˆë‹¤");
		            loadreco_table();
		            break;
				}
			}
		});
	}
	
	//ì¶”ì²œí•œ ì‚¬ìš©ìê°€ ë¹„ì¶”ì²œì„ ëˆ„ë¥¼ ê²½ìš° ì¶”ì²œìˆ˜ë¥¼ 1 ê°ì†Œí•˜ê³  ë¹„ì¶”ì²œìˆ˜ë¥¼ 1ì¦ê°€
	//ë¹„ì¶”ì²œ
	function DoReco_down(bno,rcstate)
	{
		if(confirm("ë¹„ì¶”ì²œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?") == false )
		{
			return;
		}
		
		recodown_count = $("#recodown_count").text();
	    recoup_count = $("#recoup_count").text();
		
		$.ajax({
			type : "post",
			url  : "reco_downok.jsp",
			data : 
			{
				no : bno
			},
			datatype : "html",
			success : function(result)
			{
				result = result.trim();
				switch(result)
				{
				case "ERROR" :
					alert("ì´ë¯¸ ë¹„ì¶”ì²œëœ ê²Œì‹œë¬¼ì…ë‹ˆë‹¤");
					break;
				case "OK" :
					alert("ë¹„ì¶”ì²œë˜ì—ˆìŠµë‹ˆë‹¤");
		            loadreco_table();
		            break;
				}
			}
		});
	}
	
	//ì´ë¯¸ ì¶”ì²œí•œ ê²Œì‹œë¬¼ì¸ ê²½ìš° ì¶”ì²œì·¨ì†Œ ê°€ëŠ¥
	//ì¶”ì²œ ì·¨ì†Œí•˜ë©´ ì¶”ì²œìˆ˜ë§Œ 1 ê°ì†Œ
	//ì¶”ì²œ ì·¨ì†Œ
	function DoReco_delete(bno)
	{
		if(confirm("ì¶”ì²œ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?") == false )
		{
			return;
		}
		
		recoup_count = $("#recoup_count").text();
		
		$.ajax({
			type : "post",
			url  : "recodelete.jsp",
			data : 
			{	
				bno :  bno
			},
			datatype : "html",
			success : function(result)
			{
				result = result.trim();
				switch(result)
				{
					case "ERROR" :
						alert("ì¶”ì²œì·¨ì†Œì˜¤ë¥˜");
						break;
					case "OK" :
						alert("ì¶”ì²œ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤");
			            loadreco_table();
	                    break;
				}
			}
		});
	}
	
	//ì´ë¯¸ ë¹„ì¶”ì²œí•œ ê²Œì‹œë¬¼ì¸ ê²½ìš° ë¹„ì¶”ì²œì·¨ì†Œ ê°€ëŠ¥
	//ë¹„ì¶”ì²œ ì·¨ì†Œí•˜ë©´ ë¹„ì¶”ì²œìˆ˜ë§Œ 1 ê°ì†Œ
	//ë¹„ì¶”ì²œ ì·¨ì†Œ
	function DoReco_down_delete(bno)
	{
		if(confirm("ë¹„ì¶”ì²œ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?") == false )
		{
			return;
		}
		recodown_count = $("#recodown_count").text();
		
		$.ajax({
			type : "post",
			url  : "recodowndelete.jsp",
			data : 
			{	
				bno :  bno
			},
			datatype : "html",
			success : function(result)
			{
				result = result.trim();
				switch(result)
				{
					case "ERROR" :
						alert("ë¹„ì¶”ì²œì·¨ì†Œì˜¤ë¥˜");
						break;
					case "OK" :
						alert("ë¹„ì¶”ì²œ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤");
			            loadreco_table();
	                    break;
				}
			}
		});
	}
</script>
<!-- ìƒë‹¨ë¶€ë¶„ -->
<table border="0" style="width: 100%; height: 50px; background-color: lightgray; position: relative; top: -5px;">
	<tr>
		<td width="120px">
		&nbsp;
		</td>
		<td class="keywords">
			<%
			//í‚¤ì›Œë“œí‘œì‹œ(null ê°’ì´ ì•„ë‹ˆê³  "null"ê°’ë„ ì•„ë‹ˆë©´ í‘œì‹œ) 
			if(bvo.getSeason() != null && !bvo.getSeason().equals("null"))
			{
				%>
				<span style="color: hotpink; padding-left: 30px;">&nbsp;&nbsp;&nbsp;&nbsp;<%= bvo.getSeason() %> </span>
				<%
			}
			if(bvo.getLocal() != null && !bvo.getLocal().equals("null"))
			{
				%>
				<span style="color: saddlebrown;"> <%= bvo.getLocal() %> </span>
				<%
			}
			if(bvo.getHuman() != null && !bvo.getHuman().equals("null"))
			{
				%>
				<span style="color: orangered;"> <%= bvo.getHuman() %> </span>
				<%
			}
			if(bvo.getMove() != null && !bvo.getMove().equals("null"))
			{
				%>
				<span style="color: royalblue;"> <%= bvo.getMove() %> </span>
				<%
			}
			if(bvo.getSchedule() != null && !bvo.getSchedule().equals("null"))
			{
				%>
				<span style="color: darkmagenta;"> <%= bvo.getSchedule() %> </span>
				<%
			}
			if(bvo.getUinout() != null && !bvo.getUinout().equals("null"))
			{
				%>
				<span style="color: ghostwhite;"> <%= bvo.getUinout() %> </span>
				<%
			}
			%>
		</td>
		<td class="buttons_td" width="650px;">
			<%
			//ë¹„ë¡œê·¸ì¸ì‹œ
			if(login == null){}
			//ë¡œê·¸ì¸ ìƒíƒœì™€ ë³¸ì¸ì´ ì“´ ê²Œì‹œë¬¼ì´ ë§ì„ì‹œ
			else if(login != null && login.getUno().equals(bvo.getUno()) || login.getAdmin().equals("Y"))
			{
				%>
				<button type="button" class="buttons" id="modify_btn">ìˆ˜ì •</button>
				<button type="button" class="buttons" id="delete_btn">ì‚­ì œ</button>
				<%
			}
			%>
			<%
			if(login != null)
			{
				%>
				<button type="button" class="buttons" id="bookbtn" onclick="DoBook(<%= bvo.getBno() %>);">ë¶ë§ˆí¬</button>
				<%
			}else
			{
				%>
				<button type="button" class="buttons" id="bookbtn" onclick="alert('ë¡œê·¸ì¸ í›„ ë¶ë§ˆí¬ ê°€ëŠ¥í•©ë‹ˆë‹¤.')">ë¶ë§ˆí¬</button>
				<%				
			}
			%>
			<button type="button" class="buttons" id="index_btn">ê¸€ëª©ë¡</button>
		</td>
		<td width="120px">
		&nbsp;
		</td>
	</tr>
</table>	
<!-- ë³¸ë¬¸ë¶€ë¶„ -->
<table border="0" style="width: 60%; height: 350px;" align="center" id="intro_table">
	<tr>
		<td class="intro"><h1 style="color: whitesmoke; text-align:left; height:110px;">&nbsp;&nbsp;&nbsp;<%= bvo.getBtitle() %></h1></td>
	</tr>
	<tr>
		<td class="intro" height="10"><h3 style="color: whitesmoke; text-align:left;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<%= bvo.getUnick() %></h3></td>
	</tr>	
	<tr>
		<td class="intro" height="10" style="text-align:left; height:50px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<%= bvo.getBwdate() %> ã…£ <%= bvo.getBhit() %></td>
	</tr>
</table>
<table border="0" align="center" style="width: 60%;">
	<tr>
		<td align="center" colspan="2" style="padding: 50px;"><i  style="font-size: 50px; font-weight: bolder; text-shadow:1px 1px 10px #444;"><%= bvo.getBtitle() %></i></td>
		<td align="right">
			<button type="button" id="toTop" style="width:60px; height:60px; cursor:pointer; cursor:hand; line-height: -3em; font-size: 25px; border-radius: 0.5em; background-color: rightgray; margin-left:120px;">
				â–²
			</button>
			<!-- ë§›ì§‘ì¶”ì²œ -->
			<button type="button" id="toMiddle" style="width:200px; height:600px; cursor:pointer; cursor:hand; line-height: -3em; font-size: 25px; border-radius: 0.5em; background-color: white; margin-left:60px;">
				<table border='0' align='center' style="width: 190px; height:550px; border-radius: 0.5em;">
					<tr>
						<td style="font-size:1.400rem; font-weight:700; height:30px;"><%= BFlocal.getBFlocal() %><br>ì¶”ì²œ ë§›ì§‘</td>
					</tr>
					<%
					for(bestlocalfoodVO BFvo : BFlist)
					{
						%>
						<tr>
							<td style="height:120px;">
								<a href=<%= BFvo.getBFurl() %> target="_blank"><img src=<%= BFvo.getBFimageurl() %> alt="ìŒì‹ì‚¬ì§„" style="width: 180px; height:120px; border-radius: 0.5em;"/></a>
							</td>
						</tr>
						<tr>
							<td style="font-size:1.125rem; font-weight:700; height:25px; text-align:left;"><%= BFvo.getBFtitle() %></td>
						</tr>
						<tr>
							<td style="font-size:14px; font-weight:500; height:20px; text-align:left;"><%= BFvo.getBFcategory() %></td>
						</tr>
						<%
					}
					%>
				</table>
			</button>
			<!-- ë§›ì§‘ì¶”ì²œ ë -->
			<button type="button" id="toDown" style="width:60px; height:60px; cursor:pointer; cursor:hand; line-height: -3em; font-size: 25px; border-radius: 0.5em; background-color: rightgray; margin-left:120px;">
				â–¼
			</button>
		</td>
	</tr>
	<tr>
		<td colspan="2">
			<%
			//ê²Œì‹œë¬¼ ì²¨ë¶€íŒŒì¼ ì´ë¯¸ì§€(ì—†ìœ¼ë©´ í‘œì‹œí•˜ì§€ì•ŠìŒ) 
			if(avos.isEmpty() != true)
			{
				if(!avos.get(0).getFname().equals(""))
				{
					%>
					<img src="../upload/<%= avos.get(0).getFname() %> " style="width:1140px;">
					<%
				}
			}
			%>
		</td>
	</tr>
	<tr>
		<td colspan="2" id="note">
			<%		
			String bnote = bvo.getBnote();
			bnote = bnote.replace("<","&lt;");
			bnote = bnote.replace(">","&gt;");
			bnote = bnote.replace("\n","<br>");
			%>
			<%= bnote %>
		</td>
	</tr>
	<tr>
		<td colspan="2">
			<%
			if(avos.size() > 1)
			{
				ArrayList<attachVO>  avos_4  = adto.Read(bno);
				avos_4.remove(0);
				//ê²Œì‹œë¬¼ ì²¨ë¶€íŒŒì¼ ì´ë¯¸ì§€(ì—†ìœ¼ë©´ í‘œì‹œí•˜ì§€ì•ŠìŒ) 
				if(avos.isEmpty() != true)
				{
					for(attachVO  avo : avos_4)
					{
						if(!avo.getFname().equals(""))
						{
							%>
							<img src="../upload/<%= avo.getFname() %> " style="width:1140px;">
							<%
						}
					}
				}
			}
			%>
		</td>
	</tr>
	<tr>
		<td colspan="2">
			<%
			//ê²Œì‹œë¬¼ ì²¨ë¶€íŒŒì¼ ë‹¤ìš´ë¡œë“œ(ì—†ìœ¼ë©´ í‘œì‹œí•˜ì§€ì•ŠìŒ) 
			for(attachVO avo : avos)
			{
				if(!avo.getAno().equals(""))
				{
					%>
					ì²¨ë¶€íŒŒì¼ : <a href="download.jsp?no=<%= avo.getAno() %>"><%= avo.getPname() %></a><br>
					<%
				}
			}
			%>
		</td>
	</tr>
	<tr>
		<td colspan="2">
			<table border='0' anlign='center' >
				<tr>
					<!-- 1ë²ˆì§¸ ê´‘ê³  -->
					<td width="320px" height="100" id="ad_item1">
					<%  String Adurl ="";
						String bsad = "";
						ArrayList<positiveVO> similarad_limit = advdto.similarad_limit(bno);
						if(similarad_limit != null)
						{
							positiveVO pvo1 = similarad_limit.get(0);
							bsad = pvo1.getBsad();
							advertVO advo1 = advdto.ad_limit(bsad);
							if(advo1 != null)
							{
								Adurl = advo1.getDetailURL();
								%>	
								<div id="b_item1">
									<div id="ad1-1" class="ad1-1"  style="background-image:url(<%= advo1.getImageURL() %>);"></div>
									<div id="ad1-2" class="ad1-2"> <!-- ê´‘ê³ í•˜ë‹¨ 1 -->
									<input type="hidden" id="adurl" name="adurl" value="<%= Adurl %>">
									<table border ="0" style="margin-top:20px; height:20px">
									<tr><th style="height:48px; word-break:break-all;" colspan="2"><%=advo1.getProductName() %></th></tr>
									<tr><td style="width:166; text-align: left; padding-top: 10px; padding-left: 20px;"><button class="btn-open-modal">Modalì—´ê¸°</button></td>
									<td style="width:154; text-align: right; padding-top: 10px; padding-right: 20px;"><%= advo1.getPrice() %>ì›</td></tr>
									</table>
									</div>
								</div>
						 		<%
						 		
								// ------------- í•´ë‹¹ ê´‘ê³ ë…¸ì¶œ ì •ë³´ë¥¼ í…Œì´ë¸”ì— ì €ì¥ -------------
								ad_exposureVO ex_vo1    = new ad_exposureVO();
								
								ex_vo1.setAdvertno(advo1.getAdvertno());
								ex_vo1.setBno(bno);
								if(login != null)
								{
									ex_vo1.setUno(login.getUno());
								}
								boolean ex_vo1_whether = true;
								
								ex_dto.Insert(ex_vo1, ex_vo1_whether);
								
							}else
							{
								%>
								<div id="b_item1">
								<div id="vip_item1"></div>
								</div>
								<script>loadvip_item("<%= Pri%>","<%= num%>");</script>
								<%	
								Pri++;
							}
					 		num++;
						}else
						{	%>
							<div id="b_item1">
							<div id="vip_item1"></div>
							</div>
							<script>loadvip_item("<%= Pri%>","<%= num%>");</script>
							<%	
							Pri++;
							num++;
						}
						%>
					</td>
					<!-- 2ë²ˆì§¸ ê´‘ê³  -->
					<td width="320px" height="100">
					<%  
					if(s_count > 1)
					{   
						ArrayList<positiveVO> similarad_limit2 = advdto.similarad_limit(bno);
						
						if(similarad_limit2 != null)
						{
							positiveVO pvo2 = similarad_limit2.get(0);
							advertVO advo2 = advdto.ad_limit(pvo2.getBsad());
							if(bsad.equals(pvo2.getBsad())) 
							{
			                    for(positiveVO pvo : similarad_limit2) 
			                    {
			                        if(!bsad.equals(pvo.getBsad())) 
			                        {
			                            pvo2 = pvo;
			                            advo2 = advdto.ad_limit(pvo2.getBsad());
			                            break;
			                        }
			                    }
			                }
			                bsad = pvo2.getBsad();
							if(advo2 != null)
							{
								Adurl = advo2.getDetailURL();
								%>	
								<div id="b_item2">
								<div id="ad1-1" class="ad1-1"  style="background-image:url(<%= advo2.getImageURL() %>);"></div>
								<div id="ad1-2" class="ad1-2"> <!-- ê´‘ê³ í•˜ë‹¨ 1 -->
								<input type="hidden" id="adurl" name="adurl" value="<%= advo2.getDetailURL() %>">
								<table border ="0" style="margin-top:20px; height:20px">
								<tr><th style="height:48px; word-break:break-all;" colspan="2"><%=advo2.getProductName() %></th></tr>
								<tr><td style="width:166; text-align: left; padding-top: 10px; padding-left: 20px;"><button class="btn-open-modal">Modalì—´ê¸°</button></td>
								<td style="width:154; text-align: right; padding-top: 10px; padding-right: 20px;"><%= advo2.getPrice() %>ì›</td></tr>
								</table>
								</div>
								</div>
						 		<%
								// ------------- í•´ë‹¹ ê´‘ê³ ë…¸ì¶œ ì •ë³´ë¥¼ í…Œì´ë¸”ì— ì €ì¥ -------------
								ad_exposureVO ex_vo2    = new ad_exposureVO();
								
								ex_vo2.setAdvertno(advo2.getAdvertno());
								ex_vo2.setBno(bno);
								if(login != null)
								{
									ex_vo2.setUno(login.getUno());
								}
								boolean ex_vo2_whether = true;
								
								ex_dto.Insert(ex_vo2, ex_vo2_whether);
							}else
							{
								%>
								<div id="b_item2">
								<div id="vip_item2"></div>
								</div>
								<script>loadvip_item("<%= Pri%>","<%= num%>");</script>
								<%	
								Pri++;
							}
							num++;
						}else
						{
							%>
							<div id="b_item2">
							<div id="vip_item2"></div></div>
							<script>loadvip_item("<%= Pri%>","<%= num%>");</script>
							<%	
							Pri++;
							num++;
						}
					}else
					{
						%>
							<div id="b_item2">
							<div id="vip_item2"></div>
							</div>
							<script>loadvip_item("<%= Pri%>","<%= num%>");</script>
						<%	
						Pri++;
						num++;
					}
					%>
					</td>
					<!-- 3ë²ˆì§¸ ê´‘ê³  -->
					<td width="320px" height="100">
					<%  
					if(s_count > 2)
					{
						ArrayList<positiveVO> similarad_limit3 = advdto.similarad_limit(bno);
						if(similarad_limit3 != null)
						{
							positiveVO pvo3 = similarad_limit3.get(0);
							advertVO advo3 = advdto.ad_limit(pvo3.getBsad());
							if(bsad.equals(pvo3.getBsad())) 
							{
			                    for(positiveVO pvo : similarad_limit3) 
			                    {
			                        if(!bsad.equals(pvo.getBsad())) 
			                        {
			                            pvo3 = pvo;
			                            advo3 = advdto.ad_limit(pvo3.getBsad());
			                            break;
			                        }
			                    }
			                }
			                bsad = pvo3.getBsad();
							if(advo3 != null)
							{
								Adurl = advo3.getDetailURL();
								%>	
								<div id="b_item3">
								<div id="ad1-1" class="ad1-1"  style="background-image:url(<%= advo3.getImageURL() %>);"></div>
								<div id="ad1-2" class="ad1-2"> <!-- ê´‘ê³ í•˜ë‹¨ 1 -->
								<input type="hidden" id="adurl" name="adurl" value="<%= Adurl %>">
								<table border ="0" style="margin-top:20px; height:20px">
								<tr><th style="height:48px; word-break:break-all;" colspan="2"><%=advo3.getProductName() %></th></tr>
								<tr><td style="width:166; text-align: left; padding-top: 10px; padding-left: 20px;"><button class="btn-open-modal">Modalì—´ê¸°</button></td>
								<td style="width:154; text-align: right; padding-top: 10px; padding-right: 20px;"><%= advo3.getPrice() %>ì›</td></tr>
								</table>
								</div>
								</div>
						 		<%
								// ------------- í•´ë‹¹ ê´‘ê³ ë…¸ì¶œ ì •ë³´ë¥¼ í…Œì´ë¸”ì— ì €ì¥ -------------
								ad_exposureVO ex_vo3    = new ad_exposureVO();
								
								ex_vo3.setAdvertno(advo3.getAdvertno());
								ex_vo3.setBno(bno);
								if(login != null)
								{
									ex_vo3.setUno(login.getUno());
								}
								boolean ex_vo3_whether = true;
								
								ex_dto.Insert(ex_vo3, ex_vo3_whether);
							}else
							{
								%>
								<div id="b_item3">
								<div id="vip_item3"></div>
								</div>
								<script>loadvip_item("<%= Pri%>","<%= num%>");</script>
								<%
								Pri++;
							}
							num++;
						}else
						{
							%>
							<div id="b_item3">
							<div id="vip_item3"></div>
							</div>
							<script>loadvip_item("<%= Pri%>","<%= num%>");</script>
							<%
							Pri++;
							num++;
						}
					}else
					{
						%>
							<div id="b_item3">
							<div id="vip_item3"></div>
							</div>
							<script>loadvip_item("<%= Pri%>","<%= num%>");</script>
						<%	
						Pri++;
						num++;
					}
					%>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td colspan="2" style="width:50%; text-align: center; padding-right: 20px; padding-top: 50px;">
			<div id="reco_table">
			<!-- ì¶”ì²œ ë²„íŠ¼ ë¡œë“œë  ë¶€ë¶„ -->
			</div>
		</td>
	</tr>
</table>
<hr>
<div class="modal"><!-- ëª¨ë‹¬ì°½ ë‚´ìš© ì‹œì‘ -->
    <div class="modal_body">
    <span class="btn-close-modal">&times;</span> 
    	<table border="0" style="width:100%; height:100%";>
    	<tr>
    		<td colspan="3"  style="height:250px"><div id ="spon0" class ="spon0"></div></td> <!-- ë§¨ ìœ„ ìƒë‹¨ -->
    	</tr>
    	<tr>
    		<td style="width:580px;height:300px" id ="spon1" class ="inbtn"><!-- Q1. ê¸ì •í™•ë¥   -->
    			<table border="1" id ="spon1-1" class ="spon1-1" style="width:500px; height:170px;" >
					<tr>
						<th style="height:30px;">ì—°ë²ˆ</th>
						<th style="width:420px;">ë‚´ìš©</th>
						<th>ê¸ì •í™•ë¥ </th>
					</tr>
					
					<%   int spon1 = 1;
						for(positiveVO vo : mlist)
							{
							%>	
					<tr>				
						<th><%= spon1 %></th>
						<th style="background-color:#FAC428;"><%= vo.getBpsent() %></th>
						<th><%= vo.getBposi() %></th>
					</tr>	
						 <% spon1 ++;}%>
    			</table>
    		</td>    
    		<td style="width:580px;height:300px" id ="spon2" class ="inbtn"> <!-- Q2. ë¶„ì„ëœ í‚¤ì›Œë“œ  -->
    		<table border="1" id ="spon2-1" class ="spon2-1" style="width:500px; height:170px;" >
					<tr>
						<th style="height:30px; width:60px;">ì—°ë²ˆ</th>
						<th style="width:220px;">í‚¤ì›Œë“œ</th>
						<th>ì–¸ê¸‰ëœ íšŸìˆ˜</th>
					</tr>
					<% 
					   int spon2 = 1;
						for(positiveVO vo : bkeyword)
							{
							%>	
					<tr>				
						<th><%= spon2 %></th>
						<th style="background-color:#FAC428;"><%= vo.getBkey() %></th>
						<th><%= vo.getBkfr() %></th>
					</tr>	
						 <% spon2 ++;}%>
    			</table>
    		</td>
		</tr>    	
    	<tr>
    		<td style="width:580px;height:300px" id ="spon3" class ="inbtn"> <!-- Q3. ë¶„ì„ëœ ìœ ì‚¬ë„ -->
    		<table border="1" id ="spon3-1" class ="spon3-1" style="width:500px; height:170px;" >
    		<tr>
    			<td>
    				<table border="1" style="width:250px; height:170px;">
						<tr>
							<th style="height:30px; width:70px;">í‚¤ì›Œë“œ</th>
							<th style="width:90px;">ìœ ì‚¬ í‚¤ì›Œë“œ</th>
							<th>ìœ ì‚¬ë„</th>
						</tr>
						<% 
						//ë¶„ì„ëœ ìœ ì‚¬ë„
						positiveVO pvo = advdto.K_Read(bno);   
						int limit3 = 20;
						if(pvo != null)  // ë¶„ì„ëœ í‚¤ì›Œë“œê°€ ì—†ìœ¼ë©´ ì˜¤ë¥˜ ë‚˜ì§€ ì•Šë„ë¡
						{	
						ArrayList<positiveVO> bsimilar = advdto.bsimilar(bno, limit3);
						   int spon3 = 1;
							for(positiveVO vo : bsimilar)
							{
								if(spon3 <=10)
								{%>	
						<tr>				
							<th><%= vo.getBkey() %></th>
							<th style="background-color:#FAC428;"><%= vo.getBskey() %></th>
							<th><%= vo.getBsfr() %></th>
						</tr>	
							 <% 
							 		spon3++;
								}
							 }
						}else
						{%>
						<tr>				
							<td colspan="3" style="font-size:20px">ë¶„ì„ëœ ìœ ì‚¬ë„ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
						</tr>	
						<%}
						%>
					</table >
				</td>
				<td>
    				<table border="1" style="width:250px; height:170px;">
						<tr>
							<th style="height:30px; width:70px;">í‚¤ì›Œë“œ</th>
							<th style="width:90px;">ìœ ì‚¬ í‚¤ì›Œë“œ</th>
							<th>ìœ ì‚¬ë„</th>
						</tr>
						<% 
						//ë¶„ì„ëœ ìœ ì‚¬ë„
						if(pvo != null)  // ë¶„ì„ëœ í‚¤ì›Œë“œê°€ ì—†ìœ¼ë©´ ì˜¤ë¥˜ ë‚˜ì§€ ì•Šë„ë¡
						{	
						ArrayList<positiveVO> bsimilar = advdto.bsimilar(bno, limit3);
						   int spon3_1 = 1;
							for(positiveVO vo : bsimilar)
							{
								if(spon3_1 > 10)
								{%>	
						<tr>				
							<th><%= vo.getBkey() %></th>
							<th style="background-color:#FAC428;"><%= vo.getBskey() %></th>
							<th><%= vo.getBsfr() %></th>
						</tr>	
							 <% 
							 		spon3_1++;
								}else
									spon3_1++;
							 }
						}else
						{%>
						<tr>				
							<td colspan="3" style="font-size:20px">ë¶„ì„ëœ ìœ ì‚¬ë„ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
						</tr>	
						<%}
						%>
					</table>
				</td>
				</tr>
    		</table>
    		</td>
    		<td style="width:580px;height:300px" id ="spon4" class ="inbtn"> <!-- Q4. ìœ ì‚¬í•œ ìƒí’ˆ -->
    			<table border="1" id ="spon2-1" class ="spon2-1" style="width:500px; height:170px;" >
					<tr>
						<th style="height:30px; width:50px;">ì—°ë²ˆ</th>
						<th style="width:115px;">í‚¤ì›Œë“œ</th>
						<th style="width:115px;">ìœ ì‚¬ í‚¤ì›Œë“œ</th>
						<th style="width:115px;">ìœ ì‚¬ë„</th>
						<th style="width:115px;">ìƒí’ˆ ì¹´í…Œê³ ë¦¬</th>
					</tr>
					<% 
					   int spon4 = 1;
						for(positiveVO vo : similarad)
						{
							if(vo.getBsad() != null)
							{
								%>	
								<tr>				
									<th><%= vo.getBsno() %></th>
									<th><%= vo.getBkey() %></th>
									<th><%= vo.getBskey() %></th>
									<th><%= vo.getBsfr() %></th>
									<th style="background-color:#FAC428;"><%= vo.getBsad() %></th>
								</tr>	
							 <% spon4 ++;
							} 
						}%>
    			</table>
    		</td>
		</tr>    	
    	<tr>
    		<td colspan="3" style="text-align:center;"><a href="#" id="adURL" target="_blank" class="btn-close-modal" >ìƒí’ˆ êµ¬ë§¤í•˜ëŸ¬ê°€ê¸°>>></a></td>
    	</tr>
    	</table>
    </div>
</div><!-- ëª¨ë‹¬ì°½ ë‚´ìš© ë -->
   

<!-- ëª¨ë‹¬ì°½ ì† ëª¨ë‹¬ì°½ 1ë²ˆë‚´ìš© ì‹œì‘ -->
<div class="inmodal">
  <div class="inmodal-content">
    <span class="inclose">&times;</span>                         
    <table border="0" style="width:100%; height:100%; background-image: url(../image/inmodal1.png); background-repeat: no-repeat;" >
    	<tr>
    		<td>
    			<div style="margin-top:180px">
	    			<table border="1" id ="spon1-1" class ="spon1-1" style="width:1150px; height:600px; font-size:16px" >
						<tr>
							<th style="height:30px; width:70px;">ì—°ë²ˆ</th>
							<th >ë‚´ìš©</th>
							<th style="width:100px;">ê¸ì •í™•ë¥ </th>
						</tr>
						
						<%  int inlimit = 20; //0ë²ˆë¶€í„° 20ê°œê¹Œì§€ ì¶œë ¥
							ArrayList<positiveVO> inmlist = advdto.positive_order(bno, inlimit);
							spon1 = 1;
							for(positiveVO vo : inmlist)
								{
								%>	
						<tr>				
							<th><%= spon1 %></th>
							<th style="background-color:#B6EAFF; text-align:left;">&nbsp;&nbsp;<%= vo.getBpsent() %></th>
							<th><%= vo.getBposi() %></th>
						</tr>	
							 <% spon1 ++;}%>
	    			</table>
    			</div>
    		</td>    
		</tr>   
    </table>
  </div>
</div><!-- ëª¨ë‹¬ì°½ ì† ëª¨ë‹¬ì°½ 1ë²ˆë‚´ìš© ë -->

<!-- ëª¨ë‹¬ì°½ ì† ëª¨ë‹¬ì°½ 2ë²ˆë‚´ìš© ì‹œì‘ -->
<div class="inmodal">
  <div class="inmodal-content">
    <span class="inclose">&times;</span>                         
    <table border="0" style="width:100%; height:100%; background-image: url(../image/inmodal2.png); background-repeat: no-repeat;" >
    	<tr>	
    		<td>
    			<div style="margin-top:180px">
	    			<table border="1" id ="spon2-1" class ="spon2-1" style="width:1150px; height:600px; font-size:24px" >
						<tr>
							<th style="height:30px; width:70px;">ì—°ë²ˆ</th>
							<th>í‚¤ì›Œë“œ</th>
							<th style="width:130px;">ì–¸ê¸‰ëœ íšŸìˆ˜</th>
						</tr>
						<% 
							// ë¶„ì„ëœ í‚¤ì›Œë“œ ìˆœìœ„ 
							int inlimit2 = 20; // 20ê°œê¹Œì§€ ì¶œë ¥
							ArrayList<positiveVO> inbkeyword = advdto.bkeyword(bno, inlimit2);
							System.out.println("inbkeyword size() : " + inbkeyword.size() );
							
						    spon2 = 1;
							for(positiveVO vo : inbkeyword)
								{
								%>	
						<tr>				
							<th><%= spon2 %></th>
							<th style="background-color:#B6EAFF;"><%= vo.getBkey() %></th>
							<th><%= vo.getBkfr() %></th>
						</tr>	
							 <% spon2 ++;}%>
	    			</table>
    			</div>
    		</td>
		</tr>    	
    </table>
  </div>
</div><!-- ëª¨ë‹¬ì°½ ì† ëª¨ë‹¬ì°½ 2ë²ˆë‚´ìš© ë -->

<!-- ëª¨ë‹¬ì°½ ì† ëª¨ë‹¬ì°½ 3ë²ˆë‚´ìš© ì‹œì‘ -->
<div class="inmodal">
  <div class="inmodal-content">
    <span class="inclose">&times;</span>                         
    <table border="0" style="width:100%; height:100%; background-image: url(../image/inmodal3.png); background-repeat: no-repeat;" >
    	<tr>
    		<td>
    			<div style="margin-top:180px">
		    		<table border="1" id ="spon3-1" class ="spon3-1" style="width:1150px; height:600px; font-size:16px; text-align:center;" >
			    		<tr>
			    			<td>
							<% // inbkeywordì˜ ì›ì†Œê°œìˆ˜ * 10(ìµœëŒ€)
								if(pvo != null)  // ë¶„ì„ëœ í‚¤ì›Œë“œê°€ ì—†ìœ¼ë©´ ì˜¤ë¥˜ ë‚˜ì§€ ì•Šë„ë¡
								{	%>	
									<table border="1" style="width:1150px; height:600px;">
										<!-- ì œëª© ì¤„ ì‹œì‘ -->
										<tr>
									<%	int inlimit3 = 50;
										ArrayList<positiveVO> bsimilar = advdto.bsimilar(bno, inlimit3);
										// bsimilarì˜ ì›ì†Œ ê°œìˆ˜ëŠ” inbkeywordì˜ ì›ì†Œê°œìˆ˜ * 10
										// columnsëŠ”  (td ì„¸ì¹¸ì”© ) inbkeywordì˜ ì›ì†Œê°œìˆ˜ ë§Œí¼ ìˆìŒ
										System.out.println("bsimilar : " + bsimilar.size());
										
										int columns = inbkeyword.size();
										if( columns > bsimilar.size()/10 )
										{
											columns = bsimilar.size()/10;
										}
										System.out.println("columns : " + columns);
										// columns ìˆ«ìë§Œí¼ ì œëª©ì¤„ì˜ thë¥¼ ìƒì„±
										// th * 3 * columns 
										for( int j = 0; j < columns; j++ )
										{	%>
											<th style="height:50px; width:270px;">í‚¤ì›Œë“œ</th>
											<th style="width:250px;">ìœ ì‚¬<br> í‚¤ì›Œë“œ</th>
											<th style="width:200px;">ìœ ì‚¬ë„</th>
									<%	}	%>
										</tr>
										<!-- ì œëª© ì¤„ ë -->
										<!-- td ì¶œë ¥ :: ë¬´ì¡°ê±´ 10ì¤„ -->
									<%	for( int i = 0; i < 10; i++)
										{	%>
											<tr>
											<!-- ì œëª© ì¤„ì—ì„œ ì²˜ëŸ¼ columns * 3ì˜ ê°¯ìˆ˜ë§Œí¼ tdë¥¼ ìƒì„± -->
										<%	for( int j = 0; j < columns; j++ )
											{
												System.out.println("index : " + (i + j*10 ));
											%>
													<!-- ê° ì¹¸ì˜ ì¸ë±ìŠ¤ëŠ” i + j*10 -->
													<th style="height:50px; width:270px;"><%= bsimilar.get(i+j*10).getBkey() %></th>
													<td style="width:250px; background-color:#B6EAFF;"><%= bsimilar.get(i+j*10).getBskey() %></td>
													<td style="width:200px;"><%= bsimilar.get(i+j*10).getBsfr() %></td>
										<%	}	%>
											</tr>
									<%	}
								}	%>
								</table>
							</td>
							<td>
							</td>
						</tr>
		    		</table>
	    		</div>
    		</td>
		</tr>    	
    </table>
  </div>
</div><!-- ëª¨ë‹¬ì°½ ì† ëª¨ë‹¬ì°½ 3ë²ˆë‚´ìš© ë -->

<!-- ëª¨ë‹¬ì°½ ì† ëª¨ë‹¬ì°½ 4ë²ˆë‚´ìš© ì‹œì‘ -->
<div class="inmodal">
  <div class="inmodal-content">
    <span class="inclose">&times;</span>                         
    <table border="0" style="width:100%; height:100%; background-image: url(../image/inmodal4.png); background-repeat: no-repeat;" >
    	<tr>
    		<td>
    			<div style="margin-top:180px">
	   				<table border="1" id ="spon2-1" class ="spon2-1" style="width:1150px; height:600px; font-size:24px" >
						<tr>
							<th style="height:30px; width:50px;">ì—°ë²ˆ</th>
							<th style="width:150px;">í‚¤ì›Œë“œ</th>
							<th style="width:150px;">ìœ ì‚¬ í‚¤ì›Œë“œ</th>
							<th style="width:150px;">ìœ ì‚¬ë„</th>
							<th style="width:150px;">ìƒí’ˆ ì¹´í…Œê³ ë¦¬</th>
						</tr>
						<% 
							//ë¶„ì„ëœ ê´‘ê³ í‚¤ì›Œë“œ
							int inlimit4 = 20;
							ArrayList<positiveVO> insimilarad = advdto.similarad(bno,limit4);
						   spon4 = 1;
							for(positiveVO vo : insimilarad)
							{
								if(vo.getBsad() != null)
								{
									%>	
									<tr>				
										<th><%= vo.getBsno() %></th>
										<th><%= vo.getBkey() %></th>
										<th><%= vo.getBskey() %></th>
										<th><%= vo.getBsfr() %></th>
										<th style="background-color:#B6EAFF;"><%= vo.getBsad() %></th>
									</tr>	
								 <% spon4 ++;
								} 
							}%>
	    			</table>
    			</div>
    		</td>
		</tr>    	
    </table>
  </div>
</div><!-- ëª¨ë‹¬ì°½ ì† ëª¨ë‹¬ì°½ 4ë²ˆë‚´ìš© ë -->

<script> <!-- ëª¨ë‹¬ì°½ ì† ëª¨ë‹¬ì°½ ìŠ¤í¬ë¦½íŠ¸ -->
 	// Modalì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
    var modals = document.getElementsByClassName("inmodal");
    // Modalì„ ë„ìš°ëŠ” í´ë˜ìŠ¤ ì´ë¦„ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
    var btns = document.getElementsByClassName("inbtn");
    // Modalì„ ë‹«ëŠ” close í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
    var spanes = document.getElementsByClassName("inclose");
    var funcs = [];
     
    // Modalì„ ë„ìš°ê³  ë‹«ëŠ” í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ì •ì˜í•œ í•¨ìˆ˜
    function Modal(num) {
      return function() {
        // í•´ë‹¹ í´ë˜ìŠ¤ì˜ ë‚´ìš©ì„ í´ë¦­í•˜ë©´ Modalì„ ë„ì›ë‹ˆë‹¤.
        btns[num].onclick =  function() {
            modals[num].style.display = "block";
            console.log(num);
        };
     
        // <span> íƒœê·¸(X ë²„íŠ¼)ë¥¼ í´ë¦­í•˜ë©´ Modalì´ ë‹«ìŠµë‹ˆë‹¤.
        spanes[num].onclick = function() {
            modals[num].style.display = "none";
        };
      };
    }
     
    // ì›í•˜ëŠ” Modal ìˆ˜ë§Œí¼ Modal í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ funcs í•¨ìˆ˜ì— ì •ì˜í•©ë‹ˆë‹¤.
    for(var i = 0; i < btns.length; i++) {
      funcs[i] = Modal(i);
    }
     
    // ì›í•˜ëŠ” Modal ìˆ˜ë§Œí¼ funcs í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
    for(var j = 0; j < btns.length; j++) {
      funcs[j]();
    }
     
    // Modal ì˜ì—­ ë°–ì„ í´ë¦­í•˜ë©´ Modalì„ ë‹«ìŠµë‹ˆë‹¤.
    window.onclick = function(event) {
      if (event.target.className == "inmodal") {
          event.target.style.display = "none";
      }
    };
</script>


<!-- í•˜ë‹¨ë¶€ë¶„ -->
<%
//ë¡œê·¸ì¸ì´ ë˜ì–´ì•¼ë§Œ ëŒ“ê¸€ì„ ì“¸ìˆ˜ìˆìŒ(ë¹„ë¡œê·¸ì¸ì€ ëŒ“ê¸€ì„ ë³¼ìˆ˜ë§Œ ì‡ìŒ)
if(login != null)
{
	%>
	<table border="0" style="width: 70%;" align="center">
	
		<tr>
			<td align="right" style="text-align: center; font-size : 60px;">
			<%
				String icon = "ğŸ˜„";
				switch (login.getUicon())
				{
	    		case "1": icon  = "ğŸ˜„"; break;     				  
	    		case "2": icon  = "ğŸ˜…"; break;  
	    		case "3": icon  = "ğŸ˜†"; break;  
	    		case "4": icon  = "ğŸ˜€"; break;  
	    		case "5": icon  = "ğŸ˜¨"; break;  
	    		case "6": icon  = "ğŸ‘¿"; break;  
	    		case "7": icon  = "ğŸ˜"; break;  
	    		case "8": icon  = "ğŸ˜·"; break;  
	    		case "9": icon  = "ğŸ˜´"; break;  
	    		case "10": icon  = "ğŸ˜±"; break;  
	            }
				%>
				<%= icon %>
				<%
			%>
			</td>
			<td>
				&nbsp;&nbsp;&nbsp;
				<input type="text" id="rnote" placeholder="ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”">&nbsp;&nbsp;&nbsp;
				<button type="button" id="r_write" onclick="Addreply();" style="background-color: skyblue; width: 90px; height: 35px;">ëŒ“ê¸€ ì‘ì„±</button>
			</td>
		</tr>
	</table>	
	<%
}
%>
	<div id="replyList">
	<!-- ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸ê°€ ë¡œë“œë  ë¶€ë¶„ -->
	</div>

</body>
</html>